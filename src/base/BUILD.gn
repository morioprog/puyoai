static_library("base") {
    sources = [
        "executor.cc",
        "file/file.cc",
        "file/path.cc",
        "time.cc",
        "time_stamp_counter.cc",
        "strings.cc",
        "wait_group.cc",
    ]

    public_configs = [
        "//:config"
    ]

    public_deps = [
        "//third_party/glog",
        "//third_party/gflags",
    ]
}

executable("blocking_queue_test") {
    testonly = true
    sources = [
        "blocking_queue_test.cc",
    ]
    deps = [
        ":base",
        "//third_party/gtest",
        "//third_party/gtest:gtest_main",
    ]
}

# ----------------------------------------------------------------------

# function(puyoai_base_add_test target)
#     add_executable(${target}_test ${target}_test.cc)
#     target_link_libraries(${target}_test gtest gtest_main)
#     target_link_libraries(${target}_test puyoai_base)
#     puyoai_target_link_libraries(${target}_test)
# endfunction()
# 
# function(puyoai_base_add_test_with_dir target target_file)
#     add_executable(${target}_test ${target_file}_test.cc)
#     target_link_libraries(${target}_test gtest gtest_main)
#     target_link_libraries(${target}_test puyoai_base)
#     puyoai_target_link_libraries(${target}_test)
# endfunction()
# 
# puyoai_base_add_test(blocking_queue)
# puyoai_base_add_test(bmi)
# puyoai_base_add_test(sse)
# puyoai_base_add_test(strings)
# puyoai_base_add_test(small_int_set)
# 
# puyoai_base_add_test_with_dir(path file/path)
